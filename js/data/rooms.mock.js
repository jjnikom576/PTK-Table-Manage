// Enhanced Rooms Mock Data - Multi-Year (2566-2568)
// ห้องเรียนกายภาพ สำหรับชั้น ม.1

export const roomsData = {
  // ปี 2566 (Historical)
  rooms_2566: [
    // ห้องเรียนทั่วไป (CLASS)
    {
      id: 1,
      name: "101",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2023-05-15T00:00:00Z"
    },
    {
      id: 2,
      name: "102",
      room_type: "CLASS", 
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2023-05-15T00:00:00Z"
    },
    {
      id: 3,
      name: "103",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2023-05-15T00:00:00Z"
    },
    {
      id: 4,
      name: "104",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2023-05-15T00:00:00Z"
    },
    // ห้องเทคโนโลยี (TECH)
    {
      id: 5,
      name: "ห้องวิทยาศาสตร์ 1",
      room_type: "LAB_SCI",
      capacity: 40,
      location: "อาคาร 2 ชั้น 1",
      is_active: true,
      created_at: "2023-05-15T00:00:00Z"
    },
    {
      id: 6,
      name: "ห้องวิทยาศาสตร์ 2",
      room_type: "LAB_SCI",
      capacity: 40,
      location: "อาคาร 2 ชั้น 1",
      is_active: true,
      created_at: "2023-05-15T00:00:00Z"
    },
    {
      id: 7,
      name: "ห้องคอมพิวเตอร์ 1",
      room_type: "LAB_COMP",
      capacity: 35,
      location: "อาคาร 2 ชั้น 2",
      is_active: true,
      created_at: "2023-05-15T00:00:00Z"
    },
    {
      id: 8,
      name: "ห้องดนตรี",
      room_type: "TECH",
      capacity: 30,
      location: "อาคาร 3 ชั้น 1",
      is_active: true,
      created_at: "2023-05-15T00:00:00Z"
    },
    {
      id: 9,
      name: "ห้องศิลปะ",
      room_type: "TECH",
      capacity: 35,
      location: "อาคาร 3 ชั้น 1",
      is_active: true,
      created_at: "2023-05-15T00:00:00Z"
    }
  ],

  // ปี 2567 (Current)
  rooms_2567: [
    // ห้องเรียนทั่วไป (CLASS)
    {
      id: 1,
      name: "101",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 2,
      name: "102",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1", 
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 3,
      name: "103",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 4,
      name: "104",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 5,
      name: "105",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    // ห้องเทคโนโลยี (TECH) - เพิ่มใหม่
    {
      id: 6,
      name: "ห้องวิทยาศาสตร์ 1",
      room_type: "LAB_SCI",
      capacity: 40,
      location: "อาคาร 2 ชั้น 1",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 7,
      name: "ห้องวิทยาศาสตร์ 2",
      room_type: "LAB_SCI",
      capacity: 40,
      location: "อาคาร 2 ชั้น 1",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 8,
      name: "ห้องคอมพิวเตอร์ 1",
      room_type: "LAB_COMP",
      capacity: 35,
      location: "อาคาร 2 ชั้น 2",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 9,
      name: "ห้องคอมพิวเตอร์ 2",
      room_type: "LAB_COMP",
      capacity: 35,
      location: "อาคาร 2 ชั้น 2",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 10,
      name: "ห้องดนตรี",
      room_type: "TECH",
      capacity: 30,
      location: "อาคาร 3 ชั้น 1",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 11,
      name: "ห้องศิลปะ",
      room_type: "TECH",
      capacity: 35,
      location: "อาคาร 3 ชั้น 1",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    },
    {
      id: 12,
      name: "ห้องการงาน",
      room_type: "TECH",
      capacity: 32,
      location: "อาคาร 3 ชั้น 2",
      is_active: true,
      created_at: "2024-05-15T00:00:00Z"
    }
  ],

  // ปี 2568 (Future) - ห้องใหม่เพิ่มขึ้น
  rooms_2568: [
    // ห้องเรียนทั่วไป (CLASS)
    {
      id: 1,
      name: "101",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 2,
      name: "102",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 3,
      name: "103",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 4,
      name: "104",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 5,
      name: "105",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 6,
      name: "106",
      room_type: "CLASS",
      capacity: 45,
      location: "อาคาร 1 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    // ห้องเทคโนโลยี (TECH) - อัปเกรดใหม่
    {
      id: 7,
      name: "ห้องวิทยาศาสตร์ 1",
      room_type: "LAB_SCI",
      capacity: 40,
      location: "อาคาร 2 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 8,
      name: "ห้องวิทยาศาสตร์ 2",
      room_type: "LAB_SCI",
      capacity: 40,
      location: "อาคาร 2 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 9,
      name: "ห้อง AI Lab",
      room_type: "LAB_COMP",
      capacity: 32,
      location: "อาคาร 4 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 10,
      name: "ห้องคอมพิวเตอร์ 1",
      room_type: "LAB_COMP",
      capacity: 35,
      location: "อาคาร 2 ชั้น 2",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 11,
      name: "ห้องคอมพิวเตอร์ 2",
      room_type: "LAB_COMP",
      capacity: 35,
      location: "อาคาร 2 ชั้น 2",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 12,
      name: "ห้องดนตรี",
      room_type: "TECH",
      capacity: 30,
      location: "อาคาร 3 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 13,
      name: "ห้องศิลปะ",
      room_type: "TECH",
      capacity: 35,
      location: "อาคาร 3 ชั้น 1",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 14,
      name: "ห้องการงาน",
      room_type: "TECH",
      capacity: 32,
      location: "อาคาร 3 ชั้น 2",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    },
    {
      id: 15,
      name: "ห้องโรบอติกส์",
      room_type: "TECH",
      capacity: 28,
      location: "อาคาร 4 ชั้น 2",
      is_active: true,
      created_at: "2025-05-15T00:00:00Z"
    }
  ]
};

// Helper Functions
export function getRoomsByYear(year) {
  return roomsData[`rooms_${year}`] || [];
}

export function getRoomsByType(roomType, year) {
  const rooms = getRoomsByYear(year);
  return rooms.filter(r => r.room_type === roomType);
}

export function findAvailableRooms(day, period, roomType, year) {
  // สำหรับ mockup จะ return ห้องทั้งหมดประเภทนั้น
  return getRoomsByType(roomType, year);
}

export function validateRoomConflict(newSchedule, existingSchedules, year) {
  // ตรวจสอบว่าห้องชนกันไหม
  const conflict = existingSchedules.find(schedule => 
    schedule.room_id === newSchedule.room_id &&
    schedule.day_of_week === newSchedule.day_of_week &&
    schedule.period === newSchedule.period &&
    schedule.id !== newSchedule.id
  );
  
  return {
    hasConflict: !!conflict,
    conflictSchedule: conflict
  };
}

export function getRoomDisplayName(room) {
  const typeMap = {
    'CLASS': 'ห้องเรียน',
    'TECH': 'ห้องเทคโนโลยี',
    'LAB_SCI': 'ห้องปฏิบัติการวิทยาศาสตร์',
    'LAB_COMP': 'ห้องคอมพิวเตอร์'
  };
  
  return `${room.name} (${typeMap[room.room_type]})`;
}

export function getRoomTypeDisplayName(roomType) {
  const typeMap = {
    'CLASS': 'ห้องเรียนทั่วไป',
    'TECH': 'ห้องเทคโนโลยี',
    'LAB_SCI': 'ห้องปฏิบัติการวิทยาศาสตร์',
    'LAB_COMP': 'ห้องคอมพิวเตอร์'
  };
  
  return typeMap[roomType] || roomType;
}

export function getRoomCapacityStatus(room, studentCount) {
  const utilizationRate = (studentCount / room.capacity) * 100;
  
  if (utilizationRate > 100) return 'overcapacity';
  if (utilizationRate > 90) return 'high';
  if (utilizationRate > 70) return 'medium';
  return 'low';
}

// Room Statistics
export function getRoomUtilizationStats(year) {
  const rooms = getRoomsByYear(year);
  const byType = {};
  
  rooms.forEach(room => {
    if (!byType[room.room_type]) {
      byType[room.room_type] = {
        count: 0,
        totalCapacity: 0,
        avgCapacity: 0
      };
    }
    
    byType[room.room_type].count++;
    byType[room.room_type].totalCapacity += room.capacity;
  });
  
  // คำนวณ average capacity
  Object.keys(byType).forEach(type => {
    byType[type].avgCapacity = Math.round(byType[type].totalCapacity / byType[type].count);
  });
  
  return byType;
}

// Export normalization
export function normalizeRoomRowForExport(room, context) {
  return {
    'ชื่อห้อง': room.name,
    'ประเภท': getRoomTypeDisplayName(room.room_type),
    'ความจุ': room.capacity,
    'ตำแหน่ง': room.location,
    'สถานะ': room.is_active ? 'ใช้งาน' : 'ไม่ใช้งาน',
    'ปีการศึกษา': context.year
  };
}

export default roomsData;