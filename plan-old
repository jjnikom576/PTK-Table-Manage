📋 แผนงานเว็บไซต์จัดตารางสอน (Final Complete Plan)
🗃️ Database Structure
Fixed Tables (ไม่เปลี่ยนตามปี):
1. academic_years (ปีการศึกษา)
- id (primary key)
- year (2567, 2568, 2569)
- start_date (2024-05-15)
- end_date (2025-03-31)
- is_active (boolean - ปีปัจจุบัน)
- created_at
2. semesters (ภาคเรียน)
- id (primary key)
- academic_year_id (foreign key -> academic_years.id)
- semester_number (1, 2, 3)
- semester_name (ภาคเรียนที่ 1, ภาคเรียนที่ 2, ภาคฤดูร้อน)
- start_date
- end_date
- is_active (boolean - ภาคเรียนปัจจุบัน)
- created_at
Dynamic Tables (สร้างใหม่ทุกปี):
3. teachers_2567, teachers_2568, ...
- id (primary key)
- name (ชื่อครู)
- email 
- phone (หมายเลขโทรศัพท์)
- subject_group (กลุ่มสาระการเรียนรู้)
- role (teacher/admin)
- created_at
4. classes_2567, classes_2568, ...
- id (primary key)
- semester_id (foreign key -> semesters.id)
- class_name (ม.1/1, ม.1/2, ม.2/1)
- grade_level (ม.1, ม.2, ม.3, ม.4, ม.5, ม.6)
- section (1, 2, 3, 4)
- student_count (จำนวนนักเรียน - optional)
- created_at
5. subjects_2567, subjects_2568, ...
- id (primary key)
- semester_id (foreign key -> semesters.id)
- teacher_id (foreign key -> teachers_YEAR.id)
- class_id (foreign key -> classes_YEAR.id)
- subject_name (วิทยาศาสตร์, ฟิสิกส์)
- subject_code (ว23103)
- periods_per_week (3, 4 คาบ)
- constraints (JSON สำหรับเงื่อนไข)
- created_at
6. schedules_2567, schedules_2568, ...
- id (primary key)
- semester_id (foreign key -> semesters.id)
- subject_id (foreign key -> subjects_YEAR.id)
- day_of_week (1-7)
- period (1-8)
- created_at
7. substitutions_2567, substitutions_2568, ...
- id (primary key)
- semester_id (foreign key -> semesters.id)
- absent_teacher_id (foreign key -> teachers_YEAR.id)
- absent_date
- reason (ลาป่วย/ประชุม/อบรม)
- status (draft/submitted/completed)
- created_by
- created_at
8. substitution_schedules_2567, substitution_schedules_2568, ...
- id (primary key)
- substitution_id (foreign key -> substitutions_YEAR.id)
- original_schedule_id (foreign key -> schedules_YEAR.id)
- substitute_teacher_id (foreign key -> teachers_YEAR.id)
- periods_count
- completed_at
🌐 Website Structure
Navigation Menu
html<nav>
  <a href="/student-schedule">ตารางเรียนนักเรียน</a>
  <a href="/teacher-schedule">ตารางสอนครู</a>
  <a href="/substitution">ตารางสอนแทน</a>
  <a href="/admin">จัดการระบบ (Admin)</a>
</nav>
📱 หน้าแต่ละส่วน
1. ตารางเรียนนักเรียน /student-schedule
📚 ตารางเรียนนักเรียน

📅 เลือกภาคเรียน: [ภาคเรียนที่ 1/2567 ▼]
🏫 เลือกห้องเรียน: [ม.1/1 ▼]

ตารางเรียน ม.1/1 - ภาคเรียนที่ 1 ปีการศึกษา 2567
┌─────────┬────────────┬────────────┬────────────┬──────┐
│ วัน/เวลา│ คาบ 1      │ คาบ 2      │ คาบ 3      │ คาบ 4│
│         │08:20-09:10 │09:10-10:00 │10:00-10:50 │10:50 │
├─────────┼────────────┼────────────┼────────────┼──────┤
│ จันทร์  │วิทยาศาสตร์│คณิตศาสตร์  │ฟิสิกส์     │ -    │
│         │นายคอด เอไอ │นางสาวมาตา  │นางเคมี     │      │
└─────────┴────────────┴────────────┴────────────┴──────┘
2. ตารางสอนครู /teacher-schedule
👨‍🏫 ตารางสอนครู

📅 เลือกภาคเรียน: [ภาคเรียนที่ 1/2567 ▼]

📊 สรุปภาระงานสอน (ภาคเรียนที่ 1/2567)
🏆 กลุ่มสาระ (รวมชั่วโมง)
1. วิทยาศาสตร์    45 ชั่วโมง
2. คณิตศาสตร์     38 ชั่วโมง
3. ภาษาไทย        32 ชั่วโมง

🥇 ครู (รายคน)
1. นายคอด เอไอ     24 ชั่วโมง
2. นางสาวมาตา      20 ชั่วโมง
3. นางเคมี         18 ชั่วโมง

📋 ตารางรายครู
[นายคอด เอไอ] [นางสาวมาตา] [นางเคมี]

ตารางสอน - นายคอด เอไอ
กลุ่มสาระ: วิทยาศาสตร์
📞 081-234-5678
📧 code.ai@school.com
ภาคเรียนที่ 1 ปีการศึกษา 2567

┌─────────┬────────────┬────────────┬────────────┬──────┐
│ วัน/เวลา│ คาบ 1      │ คาบ 2      │ คาบ 3      │ คาบ 4│
├─────────┼────────────┼────────────┼────────────┼──────┤
│ จันทร์  │วิทยาศาสตร์│-           │ฟิสิกส์     │-     │
│         │ม.1/1       │            │ม.4/1       │      │
└─────────┴────────────┴────────────┴────────────┴──────┘

📝 ภาระงานสอน
ว23103 วิทยาการคำนวณ ม.1/1 ม.1/2 ม.1/3 6 คาบ
ลส201 ลูกเสือ ม.2 1 คาบ
รวม 24 คาบ/สัปดาห์


📊 สรุปภาระงานสอน กับ ตารางรายครู อยู่คนละ sub nav 


3. ตารางสอนแทน /substitution
🔄 ตารางสอนแทน

📅 เลือกภาคเรียน: [ภาคเรียนที่ 1/2567 ▼]

🏅 Hall of Fame - ครูสอนแทน (ภาคเรียนนี้)
🥇 นายชีววิทยา   25 คาบ
🥈 นางเคมี       18 คาบ
🥉 นายคณิต B     15 คาบ

📅 เลือกวันที่ดูการสอนแทน
[วันนี้] [📅 15/09/2024] [เมื่อวาน] [สัปดาห์ที่แล้ว]

📋 ตารางสอนแทน - วันที่ 15 ก.ย. 2024

นายคอด เอไอ (ลาป่วย)
┌─────────┬────────────┬────────────┬────────────┬──────┐
│ วัน/เวลา│ คาบ 1      │ คาบ 2      │ คาบ 3      │ คาบ 4│
├─────────┼────────────┼────────────┼────────────┼──────┤
│ จันทร์  │วิทยาศาสตร์│-           │ฟิสิกส์     │-     │
│         │ม.1/1       │            │ม.4/1       │      │
└─────────┴────────────┴────────────┴────────────┴──────┘

ตารางสอนแทน - นายคอด เอไอ
┌─────────┬────────────┬────────────┬────────────┬──────┐
│ วัน/เวลา│ คาบ 1      │ คาบ 2      │ คาบ 3      │ คาบ 4│
├─────────┼────────────┼────────────┼────────────┼──────┤
│ จันทร์  │นายชีววิทยา│-           │นางเคมี     │-     │
│         │แทน:วิทยาฯ │            │แทน:ฟิสิกส์ │      │
│         │ม.1/1       │            │ม.4/1       │      │
└─────────┴────────────┴────────────┴────────────┴──────┘

Achievement Ranking กับ 📋 ตารางสอนแทน อยู่คนละ sub nav 


4. จัดการระบบ (Admin) /admin
⚙️ จัดการระบบ (Admin Only)
* ต้องมีการ login เข้าได้เฉพาะ แอดมิน ใช้จาก table แรก *

📋 เพิ่มข้อมูล

🎓 ปีการศึกษา: [2567 ▼]
📅 ภาคเรียน: [ภาคเรียนที่ 1 ▼]

👨‍🏫 เพิ่มครู
┌─────────────────────────────┐
│ ชื่อ: [นายคอด เอไอ]         │
│ กลุ่มสาระ: [วิทยาศาสตร์ ▼]  │
│ เบอร์: [081-234-5678]       │
│ อีเมล: [code@school.com]    │
│ [💾 บันทึก] → teachers_2567 │
└─────────────────────────────┘

🏫 เพิ่มห้องเรียน
┌─────────────────────────────┐
│ ชั้น: [ม.1 ▼]              │
│ ห้อง: [1]                  │
│ จำนวนนักเรียน: [35] (optional)│
│ [💾 บันทึก] → classes_2567  │
│ Auto generate: ม.1/1        │
└─────────────────────────────┘

📚 เพิ่มวิชา
┌─────────────────────────────┐
│ ครู: [นายคอด เอไอ ▼]        │
│ ห้องเรียน: [ม.1/1 ▼]       │
│ วิชา: [วิทยาศาสตร์]         │
│ รหัสวิชา: [ว23103]          │
│ คาบ/สัปดาห์: [3]            │
│ [💾 บันทึก] → subjects_2567│
└─────────────────────────────┘

🤖 สร้างตารางสอน
┌─────────────────────────────┐
│ [🎯 Generate ตารางด้วย AI]   │
│ [📋 Preview ตาราง]          │
│ [✏️ แก้ไขตาราง]             │
│ [💾 บันทึกเข้า Database]    │
└─────────────────────────────┘

🔄 จัดการการสอนแทน
┌─────────────────────────────┐
│ วันที่: [📅 เลือกวัน]        │
│ ครูที่ไม่อยู่:               │
│ ☑️ นายคอด - ลาป่วย          │
│ ☑️ นางมาตา - ประชุม          │
│ [🧮 หาครูสอนแทน]           │
│ [💾 Submit การสอนแทน]       │
└─────────────────────────────┘
🤖 System Logic
1. Generate ตารางสอน (AI):
[โหลดข้อมูล] → [กด Gen AI] → [AI Gen ตารางเต็ม]
    ↓
[แสดง Preview] → [AI Check Conflicts]
    ↓
[Manual ปรับแต่ง] ← ← ← [Loop จนพอใจ]
    ↓
[Submit ทั้งหมดเข้า DB]
2. จัดสอนแทน (Algorithm):
[เลือกครูที่ไม่อยู่ + เหตุผล] → [แสดงตารางครูที่ขาด]
    ↓
[Algorithm หาครูสอนแทน] → [แสดงตารางสอนแทน]
    ↓
[ปรับแต่งได้] → [Submit เข้า DB]
3. Algorithm หาครูสอนแทน:

หาครูที่ว่างในช่วงเวลานั้น
ถ้าไม่มี → return "ไม่มีครูว่างสอนแทน"
เรียงลำดับตาม: สอนแทนน้อยที่สุด → คาบสอนวันนั้นน้อยที่สุด
return ครูที่แนะนำ + ตัวเลือกสำรอง

🎯 Key Features

Multi-Year Support: แยก tables ตามปีการศึกษา
Semester Flexibility: รองรับ 2-3 ภาคเรียน
Class Management: ห้องเรียนแยกแต่ละภาคเรียน
Global Context: Admin เลือกปี/ภาคเรียนครั้งเดียว
Teacher Contact Info: เบอร์โทร + อีเมล + กลุ่มสาระ
Achievement System: Hall of Fame การสอนแทน
Historical Data: ดูข้อมูลย้อนหลังได้
AI Generation: สร้างตารางอัตโนมัติ
Algorithm Substitute: หาครูสอนแทนอัตโนมัติ

🔧 Technology Stack

Frontend: HTML, CSS, JavaScript
Database: Supabase (PostgreSQL)
AI: Claude API (เฉพาะ generate ตาราง)
Algorithm: Pure JavaScript (หาครูสอนแทน)


Total: 4 หน้าหลัก + Multi-Year Database + AI Generate + Algorithm Substitute + Achievement System + Teacher Management + Class Management + Real-time Dashboard